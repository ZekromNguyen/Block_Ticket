{
  "RateLimiting": {
    "Enabled": true,
    "HttpStatusCode": 429,
    "QuotaExceededMessage": "API calls quota exceeded! Maximum allowed: {0} per {1}.",
    "StackBlockedRequests": false,
    "RealIPHeader": "X-Real-IP",
    "ClientIdHeader": "X-Client-Id",
    "EnableMetrics": true,
    
    "Default": {
      "EnableEndpointRateLimiting": true,
      "Rules": [
        {
          "Endpoint": "*",
          "Period": "1m",
          "Limit": 1000
        },
        {
          "Endpoint": "*",
          "Period": "1h",
          "Limit": 5000
        },
        {
          "Endpoint": "*",
          "Period": "1d",
          "Limit": 50000
        }
      ]
    },

    "IpRateLimit": {
      "EnableEndpointRateLimiting": true,
      "Rules": [
        {
          "Endpoint": "*",
          "Period": "1s",
          "Limit": 10
        },
        {
          "Endpoint": "*",
          "Period": "1m",
          "Limit": 200
        },
        {
          "Endpoint": "*",
          "Period": "1h",
          "Limit": 2000
        }
      ]
    },

    "ClientRateLimit": {
      "EnableEndpointRateLimiting": true,
      "Rules": [
        {
          "Endpoint": "*",
          "Period": "1m",
          "Limit": 500
        },
        {
          "Endpoint": "*",
          "Period": "1h",
          "Limit": 2500
        },
        {
          "Endpoint": "*",
          "Period": "1d",
          "Limit": 25000
        }
      ]
    },

    "EndpointRules": [
      {
        "Endpoint": "POST:/api/v1/events",
        "Method": "POST",
        "Period": "1m",
        "LimitPerIP": 5,
        "LimitPerClient": 20,
        "Rules": [
          {
            "Period": "1m",
            "Limit": 5
          },
          {
            "Period": "1h",
            "Limit": 50
          }
        ]
      },
      {
        "Endpoint": "POST:/api/v1/*/reservations",
        "Method": "POST",
        "Period": "1m",
        "LimitPerIP": 10,
        "LimitPerClient": 30,
        "Rules": [
          {
            "Period": "1s",
            "Limit": 2
          },
          {
            "Period": "1m",
            "Limit": 10
          }
        ]
      },
      {
        "Endpoint": "POST:/api/v1/*/payments",
        "Method": "POST",
        "Period": "1m",
        "LimitPerIP": 3,
        "LimitPerClient": 10,
        "Rules": [
          {
            "Period": "1s",
            "Limit": 1
          },
          {
            "Period": "1m",
            "Limit": 3
          }
        ]
      },
      {
        "Endpoint": "GET:/api/v1/public/events",
        "Method": "GET",
        "Period": "1m",
        "LimitPerIP": 100,
        "LimitPerClient": 200,
        "Rules": [
          {
            "Period": "1m",
            "Limit": 100
          }
        ]
      },
      {
        "Endpoint": "GET:/api/v1/public/events/search",
        "Method": "GET",
        "Period": "1m",
        "LimitPerIP": 30,
        "LimitPerClient": 60,
        "Rules": [
          {
            "Period": "1s",
            "Limit": 5
          },
          {
            "Period": "1m",
            "Limit": 30
          }
        ]
      },
      {
        "Endpoint": "GET:/health*",
        "Method": "GET",
        "Period": "1m",
        "LimitPerIP": 1000,
        "LimitPerClient": 1000,
        "Rules": [
          {
            "Period": "1m",
            "Limit": 1000
          }
        ]
      }
    ],

    "IpWhitelist": [
      "127.0.0.1",
      "::1",
      "10.0.0.0/8",
      "172.16.0.0/12",
      "192.168.0.0/16"
    ],

    "ClientWhitelist": [
      "internal-monitoring",
      "health-check-service",
      "admin-dashboard"
    ]
  }
}
